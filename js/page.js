var Page=function(){function e(){i("init"),t()}function t(){f.on("click",function(){return h.next(),!1}),m.on("click",function(){return h.prev(),!1}),c.on({swipeleft:function(){return l.data("opened")?!1:(h.next(),!1)},swiperight:function(){return l.data("opened")?!1:(h.prev(),!1)}}),v.on("click",r),g.on("click",function(){var e=$(this),t=e.index(),i=function(){h.jump(t+1)};return p!==t?s(i):s(),!1}),$(window).on("debouncedresize",function(){i("reinit")})}function i(e,t){var t=void 0===t?p:t,i=c.eq(t).children("div.content"),a=i.data("jsp");"init"===e&&void 0===a?i.jScrollPane({verticalGutter:0,hideFocus:!0}):"reinit"===e&&void 0!==a?a.reinitialise():"destroy"===e&&void 0!==a&&a.destroy()}function a(){g.removeClass("menu-toc-current").eq(p).addClass("menu-toc-current")}function n(e){0===p?(f.show(),m.hide()):e?(f.hide(),m.show()):(f.show(),m.show())}function r(){var e=l.data("opened");e?s():o()}function o(){f.hide(),m.hide(),l.addClass("slideRight").data("opened",!0)}function s(e){n(p===u-1),l.removeClass("slideRight").data("opened",!1),e&&(_?l.on(b,function(){$(this).off(b),e.call()}):e.call())}var l=$("#container"),d=$("#bb-bookblock"),c=d.children(),u=c.length,p=0,h=$("#bb-bookblock").bookblock({speed:800,perspective:2e3,shadowSides:.8,shadowFlip:.4,onEndFlip:function(e,t,r){p=t,a(),n(r),i("init"),i("destroy",e)}}),f=$("#bb-nav-next"),m=$("#bb-nav-prev").hide(),g=l.find("ul.menu-toc > li"),v=$("#tblcontents"),y={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},b=y[Modernizr.prefixed("transition")],_=Modernizr.csstransitions;return{init:e}}();